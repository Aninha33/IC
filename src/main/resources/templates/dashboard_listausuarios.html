<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Projeto Webgelatel</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/dashboard.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->

    <script src="/Chart.bundle.js"></script>
    <script src="/utils.js"></script>
  </head>

  <body>

<!--formden.js communicates with FormDen server to validate fields and submit via AJAX -->
<script type="text/javascript" src="/formden.js"></script>
<!-- Special version of Bootstrap that is isolated to content wrapped in .bootstrap-iso -->
<link rel="stylesheet" href="/bootstrap-iso.css" />

<!--Font Awesome (added because you use icons in your prepend/append)-->
<link rel="stylesheet" href="/font-awesome.min.css" />

<!-- Inline CSS based on choices in "Settings" tab -->
<style>.bootstrap-iso .formden_header h2, .bootstrap-iso .formden_header p, .bootstrap-iso form{font-family: Arial, Helvetica, sans-serif; color: black}.bootstrap-iso form button, .bootstrap-iso form button:hover{color: white !important;} .asteriskField{color: red;}</style>

<!-- Extra JavaScript/CSS added manually in "Settings" tab -->
<!-- Include jQuery -->
<script type="text/javascript" src="/jquery-1.11.3.min.js"></script>
<!-- Include Date Range Picker -->
<script type="text/javascript" src="/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="/bootstrap-datepicker3.css"/>

<!-- Custom red buttom -->
<style>
  .button_red {

  border: none;
  color: white;
  padding: 15px 32px;
  background-color: #e7e7e7; color: black;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 8px;
  -webkit-transition-duration: 0.4s; /* Safari */
  transition-duration: 0.4s;
  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
  }
  .button_red:hover {
  background-color: #f44336;
  color: white;
  }
</style>

<script>
    $(document).ready(function(){
      var date_input=$('input[name="ava_1"]'); //our date input has the name "date"
      var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
      var options={
        format: 'dd/mm/yyyy',
        container: container,
        todayHighlight: true,
        autoclose: true,
      };
      date_input.datepicker(options);
      })

    $(document).ready(function(){
      var date_input=$('input[name="ava_2"]'); //our date input has the name "date"
      var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
      var options={
        format: 'dd/mm/yyyy',
        container: container,
        todayHighlight: true,
        autoclose: true,
      };
      date_input.datepicker(options);
    })
function ocultarAvaliacao() {
      var x = document.getElementById("avaliacao");
      var y = document.getElementById("ocultar1").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarGoniometria() {
      var x = document.getElementById("goniometria");
      var y = document.getElementById("ocultar2").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarPreensao() {
      var x = document.getElementById("preensao");
      var y = document.getElementById("ocultar3").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarComposicao() {
      var x = document.getElementById("composicao");
      var y = document.getElementById("ocultar4").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarDor() {
      var x = document.getElementById("dor");
      var y = document.getElementById("ocultar5").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
      }

      function ocultarEvolucaoDor() {
      var x = document.getElementById("evolucaodor");
      var y = document.getElementById("ocultar6").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarGuralnick() {
      var x = document.getElementById("guralnick");
      var y = document.getElementById("ocultar7").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarQualidade() {
      var x = document.getElementById("qualidade");
      var y = document.getElementById("ocultar8").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarForca() {
      var x = document.getElementById("forca");
      var y = document.getElementById("ocultar9").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}

function ocultarPressao() {
      var x = document.getElementById("pressao");
      var y = document.getElementById("ocultar10").firstChild;
    if (x.style.display === "none") {
      x.style.display = "block";
      y.data="-";
    } else {
      x.style.display = "none";
      y.data="+";
    }
}
</script>

<!-- Export to Excel -->
<script src="FileSaver.js"></script>
<script src="tableexport.js"></script>
<script>
var tableToExcel = (function() {
  var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
    , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
  return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
  }
})()

  //Nao exibe o conteudo dos campos
function fnExcelReport()
{
    var tab_text="<table border='2px'><tr bgcolor='#87AFC6'>";
    var textRange; var j=0;
    tab = document.getElementById('tabela'); // id of table

    for(j = 0 ; j < tab.rows.length ; j++)
    {
        tab_text=tab_text+tab.rows[j].innerHTML+"</tr>";
        //tab_text=tab_text+"</tr>";
    }

    tab_text=tab_text+"</table>";
//    tab_text= tab_text.replace(/<A[^>]*>|<\/A>/g, "");//remove if u want links in your table
  //  tab_text= tab_text.replace(/<img[^>]*>/gi,""); // remove if u want images in your table
    //tab_text= tab_text.replace(/<input[^>]*>|<\/input>/gi, ""); // reomves input params

    var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");

    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))      // If Internet Explorer
    {
        txtArea1.document.open("txt/html","replace");
        txtArea1.document.write(tab_text);
        txtArea1.document.close();
        txtArea1.focus();
        sa=txtArea1.document.execCommand("SaveAs",true,"ficha_utfpr.xls");
    }
    else                 //other browser not tested on IE 11
        sa = window.open('data:application/vnd.ms-excel,' + encodeURIComponent(tab_text));

    return (sa);
}
</script>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Projeto Webgelatel</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
	      <form method="post" class="navbar-form navbar-right">
<!--		<button formaction="importar" class="btn btn-lg btn-primary btn-block" type="submit">Importar BD</button>-->
	      </form>
	    </li>
            <li>
	      <form method="post" class="navbar-form navbar-right">
<!--		<button formaction="excluirbase" class="btn btn-lg btn-primary btn-block" type="submit">Excluir BD</button>-->
	      </form>
	    </li>
            <li><a href="#">Perfil</a></li>
            <li><a href="#">Ajuda</a></li>
          </ul>
          <form method="post" class="navbar-form navbar-right">
	    <!--            <input type="text" class="form-control" placeholder="Busca..."> -->
	    <button formaction="db" class="btn btn-lg btn-primary btn-block" type="submit">Exibir BD</button>
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="/">Visão Geral<span class="sr-only">(current)</span></a></li>
<!--	    <li><a href="dashboard_lista">
		<form method="post">
		  <button formaction="dashboard_lista" type="submit">Listar Fichas</button>
		</form>
	      </a>
	    </li>-->
	    <li><a href="dashboard_analises">
		<form method="post">
		  <button formaction="dashboard_analises" type="submit">Análises</button>
		</form>
	      </a>
	    </li>
	    <li><a href="dashboard_usuarios">
		<form method="post">
		  <button formaction="dashboard_usuarios" type="submit">Usuários</button>
		</form>
	      </a>
	    </li>
          </ul>
        </div>

	<!-- -->
	<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	  <img src="utfpr_logo.png"/>
	</div>

<!--	<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

	  <table class="table table-striped" width="53%" border="0">
	    <tr>
	      <td><h3 class="form-signin-heading">1. Avaliação</h3></td>
	      <td width="5%"><button name="ocultar1" id="ocultar1" class="btn btn-lg btn-primary btn-block" onclick="ocultarAvaliacao()">+</button></td>
	    </tr>
	  </table>
	</div>


	<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	  <table class="table table-striped" width="53%" border="0">
	    <tr>
	      <td><h3 class="form-signin-heading">2. Goniometria</h3></td>
	      <td width="5%"><button name="ocultar2" id="ocultar2" class="btn btn-lg btn-primary btn-block" onclick="ocultarGoniometria()">+</button></td>
	    </tr>
	  </table>
	</div>


	<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	  <table class="table table-striped" width="53%" border="0">
	    <tr>
	      <td><h3 class="form-signin-heading">3. Teste de Preensão Palmar</h3></td>
	      <td width="5%"><button name="ocultar3" id="ocultar3" class="btn btn-lg btn-primary btn-block" onclick="ocultarPreensao()">+</button></td>
	    </tr>
	  </table>
	</div>
-->

<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">


  <div class="col-md-6">

      <table class="table table-striped">
	<thead>
          <tr>
            <th>Número do Usuário</th>
            <th>Nome</th>
	    <th>E-mail</th>
          </tr>
	</thead>
	<tbody>
          <th:block th:each="usuario : ${listaUsuarios}">
	    <form method="post">
	      <tr>
		<td th:text="${usuario.id}"><p style="color: #f44336" th:tet="${usuario.id}"/></td>
		<td th:text="${usuario.nome}"><p style="color: #f44336" th:text="${usuario.nome}"/></td>
		<td th:text="${usuario.email}"><p style="color: #f44336" th:text="${usuario.email}"/></td>
		<td>
		  <input type="hidden" id="inserir_1" name="inserir_1" th:value="${usuario.nome}" class="form-control" autofocus>
		</td>
		<td>
		  <input type="hidden" id="inserir_2" name="inserir_2" th:value="${usuario.email}" class="form-control" autofocus>
		</td>
		<td><button formaction="atualizarUsuario" type="submit">Atualizar</button></td>
		<td>
		  <input type="hidden" id="remover_1" name="remover_1" th:value="${usuario.email}" class="form-control" autofocus>
		</td>
		<td><button formaction="removerUsuario" type="submit">Remover</button></td>
	      </tr>
	      <tr>
		<td>
		  <input type="hidden" id="remover_log" name="remover_log" value="LOG: " class="form-control" autofocus>
		</td>
	      </tr>
	    </form>
	  </th:block>
	</tbody>
      </table>
  </div>


  <!-- -->
  <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <table class="table table-striped" width="53%" border="0">
      <!--	    <tr>
		    <td>
		      <div id="finalizar" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
			<button class="button button_red" type="submit">Finalizar Cadastro</button>
		      </div>
		    </td>
      </tr>
      -->
      <tr>
	<td width="5%">
	  <br/>
	  <br/>
	  <br/>
	  <br/>
	  <footer class="footer">
	    <div id="rodape" class="container">
	      <p class="text-muted">&copy; Projeto Webgelatel - UTFPR 2020</p>
	    </div>
	  </footer>
	</td>
      </tr>
    </table>
  </div>
  <!-- -->

</div>

    </div>

	<!-- Chart.js -->
	<script>
		var MONTHS = ['1', '2', '3', '4','5'];
		var color = Chart.helpers.color;
		var barChartData = {
			labels: ['1', '2', '3','4','5'],
			datasets: [{
				label: 'Peso 1',
				backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
				borderColor: window.chartColors.red,
				borderWidth: 1,
				data: []
			}]

		};

		window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myBar = new Chart(ctx, {
				type: 'bar',
				data: barChartData,
				options: {
					responsive: true,
					legend: {
						position: 'top',
					},
					title: {
						display: true,
						text: 'Peso'
					}
				}
			});

		};


		var colorNames = Object.keys(window.chartColors);
		document.getElementById('update1').addEventListener('click', function() {


						   //Essas linhas funcionam para 1 valor, mas quero para N valores
						   //var x = 100;
						   //x = document.getElementById("update2").value;
						   //var index=0;
						   //barChartData.datasets[index].data.push(x);

   						   var ava_peso = document.getElementById("ava_peso").value;
						   var x = ava_peso.split(" ");

							    var month = MONTHS[barChartData.labels.length % MONTHS.length];
							    //Anda com o campo
							    barChartData.labels.push(month);

							   //Se colocar esse trecho dentro do laco, gera tudo em 1 (um) soh campo
							var colorName = colorNames[barChartData.datasets.length % colorNames.length];
						       var dsColor = window.chartColors[colorName];
							var newDataset = {
							      label: 'Peso ' + barChartData.datasets.length,
							       backgroundColor: color(dsColor).alpha(0.5).rgbString(),
							       borderColor: dsColor,
							       borderWidth: 1,
							       data: []
							    };

						   for (var index = 0; index < x.length; ++index) {

									       //Funciona, mas so em 1 campo
									       newDataset.data.push(x[index]);
									       }
								       barChartData.datasets.push(newDataset);
									window.myBar.update();

							    });


	</script>
<!-- -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="/assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
